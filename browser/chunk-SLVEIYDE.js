import{a as G,b as R,c as H}from"./chunk-6ECIGNIL.js";import{a as B,b as N,c as W,d as T,e as V,f as z,g as q,h as A,i as D,j as L,k as j}from"./chunk-GTE55DY3.js";import"./chunk-ECD4MZXR.js";import{i as P,j as w,k,l as O,m as I}from"./chunk-DG2PFCDW.js";import{$ as C,Ab as x,Bb as E,Da as f,Ka as F,Pa as M,a as v,aa as h,ab as g,b as y,bb as e,cb as t,gb as S,jb as _,kb as b,tb as r,ub as c,vb as U,wb as m,xb as d,ya as s,yb as p}from"./chunk-TS555NZF.js";function K(l,a){if(l&1){let n=S();e(0,"button",12),_("click",function(){C(n);let u=b();return h(u.cancelarEdicion())}),r(1,"Cancelar"),t()}}function Q(l,a){if(l&1){let n=S();e(0,"tr")(1,"td"),r(2),t(),e(3,"td"),r(4),t(),e(5,"td"),r(6),t(),e(7,"td"),r(8),t(),e(9,"td"),r(10),x(11,"date"),t(),e(12,"td")(13,"span",13),r(14),t()(),e(15,"td")(16,"button",14),_("click",function(){let u=C(n).$implicit,i=b();return h(i.editarUsuario(u))}),r(17,"Editar"),t(),e(18,"button",14),_("click",function(){let u=C(n).$implicit,i=b();return h(i.eliminarUsuario(u.id_usuario))}),r(19,"Eliminar"),t()()()}if(l&2){let n=a.$implicit;s(2),c(n.id_usuario),s(2),c(n.nombre_completo),s(2),c(n.usuario),s(2),c(n.correo),s(2),c(E(11,7,n.fecha_creacion,"short")),s(3),g("ngClass",n.estado==="activo"?"activo":"inactivo"),s(),U(" ",n.estado," ")}}var J=class l{constructor(a,n){this.usuarioService=a;this.snackBar=n}usuarios=[];usuarioForm={id_usuario:null,nombre_completo:"",usuario:"",contrasena:"",correo:"",estado:"activo"};ngOnInit(){this.cargarUsuarios()}cargarUsuarios(){this.usuarioService.obtenerUsuarios().subscribe({next:a=>this.usuarios=a,error:a=>console.error("Error al obtener usuarios:",a)})}guardarUsuario(){this.usuarioForm.id_usuario?this.usuarioService.actualizarUsuario(this.usuarioForm).subscribe({next:()=>{this.cargarUsuarios(),this.resetForm(),this.snackBar.open("Usuario actualizado correctamente","\u2715",{duration:3e3,panelClass:["custom-snackbar","success-snackbar"],horizontalPosition:"right",verticalPosition:"top"})},error:a=>console.error("Error al actualizar usuario:",a)}):this.usuarioService.agregarUsuario(this.usuarioForm).subscribe({next:()=>{this.cargarUsuarios(),this.resetForm(),this.snackBar.open("Usuario agregado correctamente","\u2715",{duration:3e3,panelClass:["custom-snackbar","success-snackbar"],horizontalPosition:"right",verticalPosition:"top"})},error:a=>console.error("Error al agregar usuario:",a)})}editarUsuario(a){this.usuarioForm=y(v({},a),{contrasena:""})}eliminarUsuario(a){this.usuarioService.eliminarUsuario(a).subscribe({next:()=>{this.cargarUsuarios(),this.snackBar.open("Usuario eliminado correctamente","\u2715",{duration:3e3,panelClass:["custom-snackbar","success-snackbar"],horizontalPosition:"right",verticalPosition:"top"})},error:()=>{this.snackBar.open("Error al eliminar el usuario","\u2715",{duration:3e3,panelClass:["custom-snackbar","error-snackbar"],horizontalPosition:"right",verticalPosition:"top"})}})}cancelarEdicion(){this.resetForm()}resetForm(){this.usuarioForm={id_usuario:null,nombre_completo:"",usuario:"",contrasena:"",correo:"",estado:"activo"}}static \u0275fac=function(n){return new(n||l)(f(H),f(G))};static \u0275cmp=F({type:l,selectors:[["app-usuarios"]],decls:34,vars:9,consts:[[3,"ngSubmit"],["name","nombre_completo","placeholder","Nombre Completo","required","",3,"ngModelChange","ngModel"],["name","usuario","placeholder","Usuario","required","",3,"ngModelChange","ngModel"],["type","password","name","contrasena","placeholder","Contrase\xF1a",3,"ngModelChange","ngModel","required"],["name","correo","placeholder","Correo","required","",3,"ngModelChange","ngModel"],["name","estado","required","",3,"ngModelChange","ngModel"],["value","activo"],["value","inactivo"],["type","submit"],["type","button",3,"click",4,"ngIf"],[1,"usuarios-table"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"ngClass"],[3,"click"]],template:function(n,o){n&1&&(e(0,"h2"),r(1,"Lista de Usuarios"),t(),e(2,"form",0),_("ngSubmit",function(){return o.guardarUsuario()}),e(3,"input",1),p("ngModelChange",function(i){return d(o.usuarioForm.nombre_completo,i)||(o.usuarioForm.nombre_completo=i),i}),t(),e(4,"input",2),p("ngModelChange",function(i){return d(o.usuarioForm.usuario,i)||(o.usuarioForm.usuario=i),i}),t(),e(5,"input",3),p("ngModelChange",function(i){return d(o.usuarioForm.contrasena,i)||(o.usuarioForm.contrasena=i),i}),t(),e(6,"input",4),p("ngModelChange",function(i){return d(o.usuarioForm.correo,i)||(o.usuarioForm.correo=i),i}),t(),e(7,"select",5),p("ngModelChange",function(i){return d(o.usuarioForm.estado,i)||(o.usuarioForm.estado=i),i}),e(8,"option",6),r(9,"Activo"),t(),e(10,"option",7),r(11,"Inactivo"),t()(),e(12,"button",8),r(13),t(),M(14,K,2,0,"button",9),t(),e(15,"table",10)(16,"thead")(17,"tr")(18,"th"),r(19,"ID"),t(),e(20,"th"),r(21,"Nombre Completo"),t(),e(22,"th"),r(23,"Usuario"),t(),e(24,"th"),r(25,"Correo"),t(),e(26,"th"),r(27,"Fecha de Creaci\xF3n"),t(),e(28,"th"),r(29,"Estado"),t(),e(30,"th"),r(31,"Acciones"),t()()(),e(32,"tbody"),M(33,Q,20,10,"tr",11),t()()),n&2&&(s(3),m("ngModel",o.usuarioForm.nombre_completo),s(),m("ngModel",o.usuarioForm.usuario),s(),m("ngModel",o.usuarioForm.contrasena),g("required",!o.usuarioForm.id_usuario),s(),m("ngModel",o.usuarioForm.correo),s(),m("ngModel",o.usuarioForm.estado),s(6),c(o.usuarioForm.id_usuario?"Actualizar":"Agregar"),s(),g("ngIf",o.usuarioForm.id_usuario),s(19),g("ngForOf",o.usuarios))},dependencies:[I,P,w,k,O,j,z,A,D,B,q,N,W,L,V,T,R],styles:["h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;color:#0c355d}form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:1rem;justify-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px;font-size:14px}.usuarios-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;box-shadow:0 2px 8px #0000001a;border-radius:8px;overflow:hidden}.usuarios-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .usuarios-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.usuarios-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#0c355d;color:#fff;font-weight:700}.usuarios-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#a1a1a1}.activo[_ngcontent-%COMP%]{color:green;font-weight:700}.inactivo[_ngcontent-%COMP%]{color:red;font-weight:700}"]})};export{J as UsuariosComponent};
