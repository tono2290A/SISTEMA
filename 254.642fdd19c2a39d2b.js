"use strict";(self.webpackChunkmi_web_informativa=self.webpackChunkmi_web_informativa||[]).push([[254],{254:(C,m,u)=>{u.r(m),u.d(m,{UsuariosComponent:()=>F});var l=u(7248),t=u(4341),_=u(2766),o=u(886),c=u(6282),d=u(1805);function p(e,g){if(1&e){const r=o.RV6();o.j41(0,"button",12),o.bIt("click",function(){c.eBV(r);const n=o.XpG();return c.Njj(n.cancelarEdicion())}),o.EFF(1,"Cancelar"),o.k0s()}}function h(e,g){if(1&e){const r=o.RV6();o.j41(0,"tr")(1,"td"),o.EFF(2),o.k0s(),o.j41(3,"td"),o.EFF(4),o.k0s(),o.j41(5,"td"),o.EFF(6),o.k0s(),o.j41(7,"td"),o.EFF(8),o.k0s(),o.j41(9,"td"),o.EFF(10),o.nI1(11,"date"),o.k0s(),o.j41(12,"td")(13,"span",13),o.EFF(14),o.k0s()(),o.j41(15,"td")(16,"button",14),o.bIt("click",function(){const n=c.eBV(r).$implicit,i=o.XpG();return c.Njj(i.editarUsuario(n))}),o.EFF(17,"Editar"),o.k0s(),o.j41(18,"button",14),o.bIt("click",function(){const n=c.eBV(r).$implicit,i=o.XpG();return c.Njj(i.eliminarUsuario(n.id_usuario))}),o.EFF(19,"Eliminar"),o.k0s()()()}if(2&e){const r=g.$implicit;o.R7$(2),o.JRh(r.id_usuario),o.R7$(2),o.JRh(r.nombre_completo),o.R7$(2),o.JRh(r.usuario),o.R7$(2),o.JRh(r.correo),o.R7$(2),o.JRh(o.i5U(11,7,r.fecha_creacion,"short")),o.R7$(3),o.Y8G("ngClass","activo"===r.estado?"activo":"inactivo"),o.R7$(),o.SpI(" ",r.estado," ")}}let F=(()=>{class e{usuarioService;snackBar;usuarios=[];usuarioForm={id_usuario:null,nombre_completo:"",usuario:"",contrasena:"",correo:"",estado:"activo"};constructor(r,s){this.usuarioService=r,this.snackBar=s}ngOnInit(){this.cargarUsuarios()}cargarUsuarios(){this.usuarioService.obtenerUsuarios().subscribe({next:r=>this.usuarios=r,error:r=>console.error("Error al obtener usuarios:",r)})}guardarUsuario(){this.usuarioForm.id_usuario?this.usuarioService.actualizarUsuario(this.usuarioForm).subscribe({next:()=>{this.cargarUsuarios(),this.resetForm(),this.snackBar.open("Usuario actualizado correctamente","\u2715",{duration:3e3,panelClass:["custom-snackbar","success-snackbar"],horizontalPosition:"right",verticalPosition:"top"})},error:r=>console.error("Error al actualizar usuario:",r)}):this.usuarioService.agregarUsuario(this.usuarioForm).subscribe({next:()=>{this.cargarUsuarios(),this.resetForm(),this.snackBar.open("Usuario agregado correctamente","\u2715",{duration:3e3,panelClass:["custom-snackbar","success-snackbar"],horizontalPosition:"right",verticalPosition:"top"})},error:r=>console.error("Error al agregar usuario:",r)})}editarUsuario(r){this.usuarioForm={...r,contrasena:""}}eliminarUsuario(r){this.usuarioService.eliminarUsuario(r).subscribe({next:()=>{this.cargarUsuarios(),this.snackBar.open("Usuario eliminado correctamente","\u2715",{duration:3e3,panelClass:["custom-snackbar","success-snackbar"],horizontalPosition:"right",verticalPosition:"top"})},error:()=>{this.snackBar.open("Error al eliminar el usuario","\u2715",{duration:3e3,panelClass:["custom-snackbar","error-snackbar"],horizontalPosition:"right",verticalPosition:"top"})}})}cancelarEdicion(){this.resetForm()}resetForm(){this.usuarioForm={id_usuario:null,nombre_completo:"",usuario:"",contrasena:"",correo:"",estado:"activo"}}static \u0275fac=function(s){return new(s||e)(o.rXU(d.o),o.rXU(_.UG))};static \u0275cmp=o.VBU({type:e,selectors:[["app-usuarios"]],decls:34,vars:9,consts:[[3,"ngSubmit"],["name","nombre_completo","placeholder","Nombre Completo","required","",3,"ngModelChange","ngModel"],["name","usuario","placeholder","Usuario","required","",3,"ngModelChange","ngModel"],["type","password","name","contrasena","placeholder","Contrase\xf1a",3,"ngModelChange","ngModel","required"],["name","correo","placeholder","Correo","required","",3,"ngModelChange","ngModel"],["name","estado","required","",3,"ngModelChange","ngModel"],["value","activo"],["value","inactivo"],["type","submit"],["type","button",3,"click",4,"ngIf"],[1,"usuarios-table"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"ngClass"],[3,"click"]],template:function(s,n){1&s&&(o.j41(0,"h2"),o.EFF(1,"Lista de Usuarios"),o.k0s(),o.j41(2,"form",0),o.bIt("ngSubmit",function(){return n.guardarUsuario()}),o.j41(3,"input",1),o.mxI("ngModelChange",function(a){return o.DH7(n.usuarioForm.nombre_completo,a)||(n.usuarioForm.nombre_completo=a),a}),o.k0s(),o.j41(4,"input",2),o.mxI("ngModelChange",function(a){return o.DH7(n.usuarioForm.usuario,a)||(n.usuarioForm.usuario=a),a}),o.k0s(),o.j41(5,"input",3),o.mxI("ngModelChange",function(a){return o.DH7(n.usuarioForm.contrasena,a)||(n.usuarioForm.contrasena=a),a}),o.k0s(),o.j41(6,"input",4),o.mxI("ngModelChange",function(a){return o.DH7(n.usuarioForm.correo,a)||(n.usuarioForm.correo=a),a}),o.k0s(),o.j41(7,"select",5),o.mxI("ngModelChange",function(a){return o.DH7(n.usuarioForm.estado,a)||(n.usuarioForm.estado=a),a}),o.j41(8,"option",6),o.EFF(9,"Activo"),o.k0s(),o.j41(10,"option",7),o.EFF(11,"Inactivo"),o.k0s()(),o.j41(12,"button",8),o.EFF(13),o.k0s(),o.DNE(14,p,2,0,"button",9),o.k0s(),o.j41(15,"table",10)(16,"thead")(17,"tr")(18,"th"),o.EFF(19,"ID"),o.k0s(),o.j41(20,"th"),o.EFF(21,"Nombre Completo"),o.k0s(),o.j41(22,"th"),o.EFF(23,"Usuario"),o.k0s(),o.j41(24,"th"),o.EFF(25,"Correo"),o.k0s(),o.j41(26,"th"),o.EFF(27,"Fecha de Creaci\xf3n"),o.k0s(),o.j41(28,"th"),o.EFF(29,"Estado"),o.k0s(),o.j41(30,"th"),o.EFF(31,"Acciones"),o.k0s()()(),o.j41(32,"tbody"),o.DNE(33,h,20,10,"tr",11),o.k0s()()),2&s&&(o.R7$(3),o.R50("ngModel",n.usuarioForm.nombre_completo),o.R7$(),o.R50("ngModel",n.usuarioForm.usuario),o.R7$(),o.R50("ngModel",n.usuarioForm.contrasena),o.Y8G("required",!n.usuarioForm.id_usuario),o.R7$(),o.R50("ngModel",n.usuarioForm.correo),o.R7$(),o.R50("ngModel",n.usuarioForm.estado),o.R7$(6),o.JRh(n.usuarioForm.id_usuario?"Actualizar":"Agregar"),o.R7$(),o.Y8G("ngIf",n.usuarioForm.id_usuario),o.R7$(19),o.Y8G("ngForOf",n.usuarios))},dependencies:[l.MD,l.YU,l.Sq,l.bT,l.vh,t.YN,t.qT,t.xH,t.y7,t.me,t.wz,t.BC,t.cb,t.YS,t.vS,t.cV,_._T],styles:["h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;color:#0c355d}form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:1rem;justify-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px;font-size:14px}.usuarios-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;box-shadow:0 2px 8px #0000001a;border-radius:8px;overflow:hidden}.usuarios-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .usuarios-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.usuarios-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#0c355d;color:#fff;font-weight:700}.usuarios-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#a1a1a1}.activo[_ngcontent-%COMP%]{color:green;font-weight:700}.inactivo[_ngcontent-%COMP%]{color:red;font-weight:700}"]})}return e})()}}]);